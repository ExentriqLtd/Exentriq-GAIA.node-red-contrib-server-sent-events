<script type="text/javascript">
  RED.nodes.registerType('sse-server', {
    category: 'sse',
    name: 'sse-server',
    color: '#4693c8',
    defaults: {
      name: { value: '', type: 'string' },
      event: { value: '', type: 'string' },
      data: { value: '', type: 'string' },
    },
    align: 'right',
    inputs: 1,
    icon: 'white-globe.svg',
    label: function () {
      return this.name || 'sse-server';
    },
  });
</script>

<script type="text/html" data-template-name="sse-server">
  <div class="form-row">
		<label for="node-input-name"><i class="fa fa-font"></i> Name </label>
		<input type="text" id="node-input-name" />
	</div>
	<div class="form-row">
		<label for="node-input-event"><i class="fa fa-podcast"></i> Event </label>
		<input type="text" id="node-input-event" />
	</div>
</div>
<div class="form-row">
  <label for="node-input-data"><i class="fa fa-cobes"></i> Event </label>
  <input type="text" id="node-input-data" />
</div>
	<div class="form-tips">
    <p>
      Define an event name & a payload to send to all subscribed clients of this HTTP endpoint. By
      default, `msg.topic` will be used for the event type, `msg.payload` will be stringified and sent
    </p>
    <b>
      This node must always origin from an 'http in' node
    </b>
	</div>
</script>

<script type="text/html" data-help-name="sse-server">
	<p>Subscribe to a SSE - event stream. This node must originate from a default `http-in` node.</p>
	<p>
		Reference for Server Sent Events on the client side:
		https://developer.mozilla.org/en-US/docs/Web/API/Server-sent_events/Using_server-sent_events
	</p>
</script>